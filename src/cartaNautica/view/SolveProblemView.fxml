<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ColorPicker?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Slider?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane stylesheets="@../styles/styles.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="cartaNautica.controller.SolveProblemController">
    <center>
        <VBox spacing="5">
            <!-- Barra de herramientas estilo Word con grupos verticales -->
            <HBox spacing="15" style="-fx-padding: 5 10 5 10; -fx-background-color: #f0f0f0;">
                <!-- Grupo de dibujo -->
                <VBox alignment="CENTER" spacing="3" styleClass="tool-group">
                    <Label styleClass="tool-group-header" text="Dibujo">
                  <font>
                     <Font name="System Bold" size="12.0" />
                  </font></Label>
                    <HBox alignment="CENTER" spacing="2">
                        <fx:define>
                            <ToggleGroup fx:id="toolToggleGroup" />
                        </fx:define>
                        <ToggleButton fx:id="pointToolButton" text="Punto">
                     <toggleGroup>
                        <ToggleGroup fx:id="toolToggleGroup" />
                     </toggleGroup></ToggleButton>
                        <ToggleButton fx:id="lineToolButton" text="Línea" toggleGroup="$toolToggleGroup" />
                        <ToggleButton fx:id="arcToolButton" text="Arco" toggleGroup="$toolToggleGroup" />
                        <ToggleButton fx:id="textToolButton" text="Texto" toggleGroup="$toolToggleGroup" />
                    </HBox>
                </VBox>
                
                <Separator orientation="VERTICAL" />
                
                <!-- Grupo de medición con controles de rotación a la derecha -->
                <VBox alignment="CENTER" spacing="3" styleClass="tool-group">
                    <Label styleClass="tool-group-header" text="Medición">
                  <font>
                     <Font name="System Bold" size="12.0" />
                  </font></Label>
                    <HBox alignment="CENTER" spacing="10">
                        <!-- Herramientas de medición -->
                        <HBox alignment="CENTER" spacing="2">
                            <ToggleButton fx:id="protractorToolButton" text="Transportador" toggleGroup="$toolToggleGroup" />
                            <ToggleButton fx:id="rulerToolButton" text="Regla" toggleGroup="$toolToggleGroup" />
                        </HBox>
                        
                        <!-- Separador vertical entre herramientas y controles de rotación -->
                        <Separator orientation="VERTICAL" />
                        
                        <!-- Controles de rotación a la derecha con una ligera separación entre botones y ángulo -->
                        <HBox alignment="CENTER" spacing="2">
                            <Label text="Rotar:" />
                     <Slider fx:id="widthSlider1" prefWidth="100" />
                            
                                     <Label fx:id="rotationAngleLabel" styleClass="angle-label" text="0°" />
                        </HBox>
                    </HBox>
                </VBox>
                
                <Separator orientation="VERTICAL" />
                
                <!-- Grupo de borrado -->
                <VBox alignment="CENTER" spacing="3" styleClass="tool-group">
                    <Label styleClass="tool-group-header" text="Borrado">
                  <font>
                     <Font name="System Bold" size="12.0" />
                  </font></Label>
                    <HBox alignment="CENTER" spacing="2">
                        <ToggleButton fx:id="eraserToolButton" text="Borrador" toggleGroup="$toolToggleGroup" />
                        <Button fx:id="clearButton" onAction="#limpiarTodo" text="Limpiar todo" />
                    </HBox>
                </VBox>
                
                <Separator orientation="VERTICAL" />
                
                <!-- Herramientas de estilo -->
                <VBox alignment="CENTER" spacing="3" styleClass="tool-group">
                    <Label styleClass="tool-group-header" text="Estilo">
                  <font>
                     <Font name="System Bold" size="12.0" />
                  </font></Label>
                    <HBox alignment="CENTER" spacing="5">
                        <ColorPicker fx:id="colorPicker" />
                        <Label text="Ancho:" />
                  <StackPane HBox.hgrow="ALWAYS">
                     <children>
                              <Slider fx:id="widthSlider" prefWidth="100" />
                        <ComboBox prefWidth="50.0" visible="false" StackPane.alignment="CENTER_LEFT" />
                     </children>
                  </StackPane>
                    </HBox>
                </VBox>
            </HBox>
            
            <!-- Contenedor principal con la carta y el panel lateral -->
            <HBox spacing="10" VBox.vgrow="ALWAYS">
                <!-- Panel principal de la carta (ahora ajustado para dejar más espacio al panel lateral) -->
                <StackPane maxWidth="Infinity" HBox.hgrow="ALWAYS">
                    <ScrollPane fx:id="chartScrollPane" pannable="true" prefHeight="500" HBox.hgrow="ALWAYS">
                        <!-- Contenido del ScrollPane será añadido mediante código Java -->
                    </ScrollPane>
                </StackPane>
                
                <!-- Panel lateral derecho con el problema y respuestas (aún más estrecho) -->
                <VBox maxWidth="280" minWidth="220" prefWidth="250" style="-fx-background-color: #f0f0f0; -fx-padding: 15; -fx-spacing: 10;" styleClass="problem-panel">
                    <Label styleClass="section-header" text="Problema" textFill="#0d47a1">
                  <font>
                     <Font name="System Bold" size="16.0" />
                  </font></Label>
                    
                    <!-- VBox para contener los RadioButtons de respuestas -->
                    <VBox fx:id="answersContainer" spacing="10" VBox.vgrow="ALWAYS">
                        <fx:define>
                            <ToggleGroup fx:id="answersToggleGroup" />
                        </fx:define>
                  <children>
                     <Label fx:id="enunciadoLabel" textOverrun="WORD_ELLIPSIS" wrapText="true" VBox.vgrow="ALWAYS" />
                     <Region prefHeight="23.0" prefWidth="219.0" />
                     <RadioButton fx:id="respuesta1" mnemonicParsing="false">
                        <toggleGroup>
                           <ToggleGroup fx:id="respuestas" />
                        </toggleGroup>
                     </RadioButton>
                     <RadioButton fx:id="respuesta2" mnemonicParsing="false" toggleGroup="$respuestas" />
                     <RadioButton fx:id="respuesta3" mnemonicParsing="false" toggleGroup="$respuestas" />
                     <RadioButton fx:id="respuesta4" mnemonicParsing="false" toggleGroup="$respuestas" />
                  </children>
                        <!-- Los RadioButtons de respuestas se añadirán dinámicamente en el controlador -->
                    </VBox>
                    
                    <!-- Botones de Volver y Resolver en la misma fila con ancho ajustado -->
                    <HBox alignment="CENTER" spacing="10">
                        <Button fx:id="solveButton" onAction="#resolver" prefWidth="90" style="-fx-background-color: #1976D2;" styleClass="primary-button" text="Resolver" textFill="WHITE">
                     <font>
                        <Font name="System Bold" size="12.0" />
                     </font></Button>
                    </HBox>
                </VBox>
                
                <padding>
                    <Insets bottom="5" left="10" right="10" top="5" />
                </padding>
            </HBox>
        </VBox>
    </center>
    
    <bottom>
        <VBox>
            <!-- Panel de zoom en la parte inferior -->
            <HBox alignment="CENTER" spacing="10" style="-fx-padding: 5;" styleClass="zoom-box">
                <Label text="Zoom:" />
                <Slider fx:id="zoomSlider" max="1.5" min="0.5" prefWidth="200" value="1.0" />
                <Button onAction="#zoomOut" style="-fx-background-color: #0d47a1;" text="-" textFill="WHITE">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font></Button>
                <Button onAction="#zoomIn" style="-fx-background-color: #1976D2;" text="+" textFill="WHITE">
               <font>
                  <Font name="System Bold" size="12.0" />
               </font></Button>
            </HBox>
            
            <!-- Barra de estado -->
            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="status-bar">
                <padding>
                    <Insets bottom="5" left="10" right="10" top="5" />
                </padding>
            </HBox>
        </VBox>
    </bottom>
   <top>
      <HBox prefHeight="26.0" prefWidth="200.0" stylesheets="@../styles/styles.css" BorderPane.alignment="CENTER">
         <children>
            <HBox prefHeight="15.0" prefWidth="525.0" style="-fx-background-color: #0D47A1;" HBox.hgrow="ALWAYS">
               <children>
                  <Button fx:id="backButton" maxHeight="-Infinity" maxWidth="-Infinity" mnemonicParsing="false" onAction="#goToProblems" prefHeight="2.0" style="-fx-background-color: transparent;" text="Volver" textFill="WHITE">
                     <graphic>
                        <ImageView fitHeight="15.0" fitWidth="15.0" pickOnBounds="true" preserveRatio="true">
                           <image>
                              <Image url="@../../resources/volverpng.png" />
                           </image>
                        </ImageView>
                     </graphic>
                  </Button>
               </children></HBox>
            <HBox HBox.hgrow="NEVER" />
         </children>
      </HBox>
   </top>
</BorderPane>
